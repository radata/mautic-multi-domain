{% if tmpl == 'index' %}
    {% extends '@MauticMultiDomain/Multidomain/index.html.twig' %}
{% endif %}
{% block _content %}
{% if items|length %}
<div class="table-responsive page-list">
    <table class="table table-hover table-striped table-bordered multidomain-list" id="multidomainTable">
        <thead>
            <tr>
                {{ include('@MauticCore/Helper/tableheader.html.twig', {
                    'checkall': 'true',
                    'target': '#multidomainTable',
                    'routeBase': 'multidomain',
                    'templateButtons': {
                        'delete': permissions['multidomain:items:delete']
                    }
                }) }}
                {{ include('@MauticCore/Helper/tableheader.html.twig', {
                    'sessionVar': 'multidomain',
                    'orderBy': 'f.email',
                    'text': 'plugin.multidomain.email',
                    'class': 'col-multidomain-name',
                    'default': true
                }) }}
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>
                    {{ include('@MauticCore/Helper/list_actions.html.twig', {
                        'item': item,
                        'templateButtons': {
                            'edit': securityHelper.hasEntityAccess(
                                permissions['multidomain:items:editown'],
                                permissions['multidomain:items:editother'],
                                item.createdBy
                            ),
                            'clone': permissions['multidomain:items:create'],
                            'delete': securityHelper.hasEntityAccess(
                                permissions['multidomain:items:deleteown'],
                                permissions['multidomain:items:deleteother'],
                                item.createdBy
                            )
                        },
                        'routeBase': 'multidomain'
                    }) }}
                </td>
                <td>
                    <div>
                        <a data-toggle="ajax" href="{{ path('mautic_multidomain_action', {'objectId': item.id, 'objectAction': 'view'}) }}">
                            {{ item.email }}
                        </a>
                    </div>
                    {% if item.domain %}
                    <div class="text-muted mt-4">
                        <small>{{ item.domain }}</small>
                    </div>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="panel-footer">
    {{ include('@MauticCore/Helper/pagination.html.twig', {
        'totalItems': items|length,
        'page': page,
        'limit': limit,
        'baseUrl': path('mautic_multidomain_index'),
        'sessionVar': 'multidomain'
    }) }}
</div>
{% else %}
    {{ include('@MauticCore/Helper/noresults.html.twig', {'tip': 'mautic.multidomain.noresults.tip'}) }}
{% endif %}
{% endblock %}
